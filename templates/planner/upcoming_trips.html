{% extends 'base.html' %}
{% block title %}Upcoming Trips - GoMyanmar{% endblock %}
{% load custom_filters %}
{% load humanize %}

{% block content %}
<div class="container py-5 mt-5">
    <!-- Header -->
    <div class="card-glass p-4 mb-4">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h2 class="fw-bold mb-2">Upcoming Trips</h2>
                <p class="text-gray mb-0">{{ total_upcoming }} trip{{ total_upcoming|pluralize }} planned â€¢ Total estimated cost: {{ total_cost_mmk|intcomma }} MMK</p>
            </div>
            <div>
                <a href="{% url 'planner:dashboard' %}" class="btn btn-outline-light me-2">
                    <i class="fas fa-arrow-left me-2"></i>Back to Dashboard
                </a>
                <a href="{% url 'planner:plan' %}" class="btn btn-primary">
                    <i class="fas fa-plus me-2"></i>Add New Trip
                </a>
            </div>
        </div>
    </div>
    
    {% if upcoming_trips %}
    <div class="row">
        {% for trip in upcoming_trips %}
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card-glass p-4 h-100">
                <div class="d-flex justify-content-between align-items-start mb-3">
                    <div>
                        <h5 class="mb-1">{{ trip.destination }}</h5>
                        <p class="text-gray small mb-0">From {{ trip.origin }}</p>
                    </div>
                    <span class="badge {% if trip.status == 'booked' %}bg-primary{% else %}bg-info{% endif %}">
                        {{ trip.status_display }}
                    </span>
                </div>
                
                <div class="mb-3">
                    <p class="text-gray small mb-2">
                        <i class="fas fa-calendar me-1"></i>
                        {{ trip.start_date|date:"M d" }} - {{ trip.end_date|date:"M d, Y" }}
                        ({{ trip.total_days }} days)
                    </p>
                    {% if trip.days_until %}
                    <p class="text-gray small mb-0">
                        <i class="fas fa-clock me-1"></i>
                        In {{ trip.days_until }} day{{ trip.days_until|pluralize }}
                    </p>
                    {% endif %}
                </div>
                
                <div class="mb-3">
                    <p class="text-gray small mb-1">
                        <i class="fas fa-hotel me-1"></i> {{ trip.hotel }}
                    </p>
                    <p class="text-gray small mb-0">
                        <i class="fas fa-bus me-1"></i> {{ trip.transport }}
                    </p>
                </div>
                
                <div class="d-flex justify-content-between align-items-center mt-auto">
                    <div>
                        <h5 class="mb-0">{{ trip.total_cost_mmk|intcomma }} MMK</h5>
                        <small class="text-muted">{{ trip.travelers }} traveler{{ trip.travelers|pluralize }}</small>
                    </div>
                    <div class="btn-group">
                        <a href="#" class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-eye"></i>
                        </a>
                        <a href="{% url 'planner:plan' %}?trip_id={{ trip.id }}" class="btn btn-sm btn-outline-info">
                            <i class="fas fa-edit"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="card-glass p-5 text-center">
        <i class="fas fa-calendar-alt fa-4x text-muted mb-3"></i>
        <h4 class="text-muted mb-3">No upcoming trips</h4>
        <p class="text-gray mb-4">You don't have any trips planned. Start planning your next adventure!</p>
        <a href="{% url 'planner:plan' %}" class="btn btn-primary">
            <i class="fas fa-plus me-2"></i>Plan Your First Trip
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}